![[Lab09_linux.pdf]]

---

# –ó–∞–¥–∞–Ω–∏–µ 1. DHCP-—Å–µ—Ä–≤–µ—Ä

## 1. –£—Å—Ç–∞–Ω–æ–≤–∏–º DHCP-—Å–µ—Ä–≤–µ—Ä

```bash:
sudo pacman -S dhcp
```

–° –ø–∞–∫–µ—Ç–æ–º _dhcp_ –ø–æ—Å—Ç–∞–≤–ª—è—Ç—Å—è –¥–≤–∞ —Å–µ—Ä–≤–∏—Å–∞: `dhcpd4.service` –∏ `dhcpd6.service`. –ù–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –ø–µ—Ä–≤—ã–π –∏–∑ –Ω–∏—Ö.

> –°–µ–π—á–∞—Å —É–∑–Ω–∞–ª, —á—Ç–æ –Ω–∞ Arch Wiki, —á—Ç–æ –Ω–∞—á–∏–Ω–∞—è —Å —è–Ω–≤–∞—Ä—è 2023 –≥–æ–¥–∞ `dhcpd` –±–æ–ª–µ–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è ISC –∏ –µ–º—É –Ω–∞ –∑–∞–º–µ–Ω—É –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç DHCP-—Å–µ—Ä–≤–µ—Ä `Kea`. –í Arch Linux –µ–≥–æ, –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç, –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å –∏–∑ AUR.
> 
> –ï—Å–ª–∏ –±—É–¥–µ—Ç —Ç–∞–∫–∞—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å, –±—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –∏–∑—É—á–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç. –¢—É–¥–∞ –¥–æ–±–∞–≤–∏–ª–∏ –º–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ. –í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –≤–∑–≥–ª—è–Ω—É–≤ –ø–æ –¥–∏–∞–≥–æ–Ω–∞–ª–∏, —è –Ω–∞—à—ë–ª –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≥–∏–±–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–µ–¥–µ–Ω–∏—è –ª–æ–≥–æ–≤, –∫–æ–Ω—Å–æ–ª—å–Ω—É—é —É—Ç–∏–ª–∏—Ç—É –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è, REST-ful API üò±, –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π JSON-—Ñ–æ—Ä–º–∞—Ç –∫–æ–Ω—Ñ–∏–≥–æ–≤ üò±üò±, —Å–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ üò±üò±üò± –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É Postgres –∏ MySQL –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö üò±üò±üò±üò±.
> >[!note]- –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Kea
> >
> ![[Pasted image 20240116174530.png | center | 500]]

# 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∏–º DHCP-—Å–µ—Ä–≤–µ—Ä

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–≥–æ –Ω–µ–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤, –ø–æ—ç—Ç–æ–º—É –∏–º–µ–µ—Ç —Å–º—ã—Å–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –µ—ë –≤ —Ä–µ–∑–µ—Ä, –∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω–∏—Ç—å.

```bash:
cp /etc/dhcpd.conf /etc/dhcpd.conf.example
```

–¢–∞–∫–∂–µ –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã dhcp-—Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å–∫–∞–ª—Å—è –¥–ª—è –∫–∞–∫–æ–≥–æ-—Ç–æ –æ–¥–Ω–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –∞ –Ω–µ –¥–ª—è –≤—Å–µ—Ö —Å—Ä–∞–∑—É. –ü–æ—Ç–æ–º—É —á—Ç–æ –æ–±—Ä–∞—Ç–Ω–æ–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è.

–í –¥–∏—Å—Ç–∏–±—É—Ç–∏–≤–µ Debian —Å –ø–∞–∫–µ—Ç–æ–º _isc-dhcp-server_ —ç—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—É—Ç—ë–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ—Ä—Ç–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ `/etc/default/isc-dhcp-server`. 

–í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –ø–æ—á–µ–º—É-—Ç–æ —Ç–∞–∫–æ–π –±–ª–∞–≥–æ–¥–∞—Ç–∏ –Ω–µ—Ç, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ _dhcpd_ —ç—Ç–æ —Ç–æ–∂–µ dhcp-—Å–µ—Ä–≤–µ—Ä –æ—Ç ISC. –í–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ –≤ –¥–µ–±–∏–∞–Ω–µ –º–µ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø—Ä–∏–∫—Ä—É—Ç–∏–ª–∏ —Å–≤–µ—Ä—Ö—É. –ü–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å _a2ensite_, _a2dissite_ –∏ –ø—Ä–æ—á–∏–º –≤ –ø–∞–∫–µ—Ç–µ _apache2_ - –≤—Å–µ —ç—Ç–∏ —Å–∫—Ä–∏–ø—Ç—ã –¥–∞–ª–µ–∫–æ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π —á–∞—Å—Ç—å—é –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞.  

–í "–∫–æ–º–ø–ª–µ–∫—Ç–µ –ø–æ—Å—Ç–∞–≤–∫–∏"¬†_dhcpd_¬†–Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω —é–Ω–∏—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞ –æ–¥–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏–¥—ë—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –µ–≥–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –°–Ω–∞—á–∞–ª–∞ —Å–∫–æ–ø–∏—Ä—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–ª—É–∂–±—É:

```bash:
sudo cp /usr/lib/systemd/system/dhcpd4.service /etc/systemd/system/dhcpd4@.service
```

–ó–∞—Ç–µ–º –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫–∏ ExecStart –∏ PIDFile, –¥–æ–±–∞–≤–∏–≤ –≤ –Ω–∏—Ö —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:

```systemd:/etc/systemd/system/dhcpd4@.service
...
[Service]
...
ExecStart=/usr/bin/dhcpd -4 -q -cf /etc/dhcpd-%I.conf -pf /run/dhcpd4/dhcpd-%I.pid %I
...
PIDFile=/run/dhcpd4/dhcpd-%I.pid
...
```

–ó–¥–µ—Å—å –º—ã —Å–¥–µ–ª–∞–ª–∏ –≤—Å–µ —Ñ–∞–π–ª—ã DHCP-—Å–µ—Ä–≤–µ—Ä–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º —Å–µ—Ç–µ–≤—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º. –í —Ç–æ–º —á–∏—Å–ª–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è `dhcpd4@eth0.service`, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –±—É–¥–µ—Ç `/etc/dhcpd-eth0.conf`).

## 3.1. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º DHCP-—Å–µ—Ä–≤–µ—Ä - –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≤—ã–¥–∞—á–∞

–°–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫–∏–µ —É –Ω–∞—Å –µ—Å—Ç—å —Å–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã. –í—Å–ø–æ–º–Ω–∏–º, –∫—É–¥–∞ –Ω–∞–¥–æ –ø–æ–¥–Ω–∏–º–∞—Ç—å DHCP-—Å–µ—Ä–≤–µ—Ä:

![[Pasted image 20240116184406.png | center | 800]]

–•–æ—Ä–æ—à–æ. –ù–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `enp0s8`. –°–æ–∑–¥–∞–¥–∏–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª DHCP-—Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è —ç—Ç–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:

```ruby:/etc/dhcpd-eth0.conf
# –ü–æ–¥—Å–µ—Ç—å 192.168.100.0
subnet 192.168.100.0 netmask 255.255.255.0 {
	
	# –í—ã–¥–∞—ë–º IP-–∞–¥—Ä–µ—Å–∞ –æ—Ç 100 –¥–æ 120
	range 192.168.100.100 192.168.100.120;

	# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ä–æ–∫–∏ –∞—Ä–µ–Ω–¥—ã
	default-lease-time 300;
	max-lease-time 3600;

	# –ü–µ—Ä–µ–¥–∞—ë–º –∫–ª–∏–µ–Ω—Ç—É –≤—Å—è–∫—É—é –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
	#  –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ–º–µ–Ω–Ω—ã—Ö –∏–º—ë–Ω, –º–∞—Å–∫—É, IP –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞ (–º—ã) –∏ –∞–¥—Ä–µ—Å –¥–ª—è —Ä–∞–∑–¥–∞—á
	option domain-name-servers 192.168.100.42;
	option subnet-mask 255.255.255.0;
	option routers 192.168.100.1;
	option broadcast-address 192.168.100.255; 
}
```

–ó–∞–ø—É—Å–∫–∞–µ–º DHCP-—Å–µ—Ä–≤–µ—Ä:

```bash:
sudo systemctl start dhcpd4@enp0s8
```

–ò –ø–æ–Ω–∏–º–∞–µ–º, —á—Ç–æ –≥–¥–µ-—Ç–æ –±—ã–ª –ø–æ–¥–≤–æ—Ö... –°–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π.
–ß–∏—Ç–∞–µ–º –ª–æ–≥–∏:

```bash:
journalctl | grep -Ei 'dhcp' 
```

![[Pasted image 20240116185121.png | center | 800]]

–ß–∏—Ç–∞–µ–º - –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–Ω–∏–º–∞–µ–º!
–ò—â–µ–º –æ—Ç–≤–µ—Ç, –∏ –Ω–∞—Ö–æ–¥–∏–º:

![[Pasted image 20240116185308.png | center | 700]]

–û–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, –¥–ª—è –∑–∞–ø—É—Å–∫–∞ DHCP-—Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞–º —É–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∏—Å–≤–æ–µ–Ω —Ö–æ—Ç—è –±—ã –∫–∞–∫–æ–π-—Ç–æ IP-–∞–¥—Ä–µ—Å –∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞. –ò –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π (–∞–¥—Ä–µ—Å–∞, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–µ—Å—è –Ω–∞ 0, –Ω–µ —Å—á–∏—Ç–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏, –ø–æ—Å–∫–æ–ª—å–∫—É –ø—Ä–æ—Å—Ç–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç –ø–æ–¥—Å–µ—Ç—å). –° –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å—é –∞–¥—Ä–µ—Å–∞ —É –Ω–∞—Å –ø—Ä–æ–±–ª–µ–º –Ω–µ—Ç. –ù–æ –æ–Ω–∞ –±—ã–ª–∞ —Å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º.

–†–µ—à–∞–µ–º –ø—Ä–æ–±–ª–µ–º—É, –ø—Ä–∏—Å–≤–∞–∏–≤–∞—è —Å–µ–±–µ –ª–æ–∫–∞–ª—å–Ω—ã–π IP-–∞–¥—Ä–µ—Å:

```bash:
sudo ifconfig enp0s8 192.168.100.1
```

![[Pasted image 20240116185855.png | center | 800]]

–ó–∞–º–µ—á–∞–µ–º, –∫—Å—Ç–∞—Ç–∏, —á—Ç–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ç–∏ –Ω–∞ –ø–∞–Ω–µ–ª–∏ –∑–∞–¥–∞—á –ø–µ—Ä–µ—Å—Ç–∞–ª –±–µ—à–µ–Ω–æ –º–∏–≥–∞—Ç—å. –í–∏–¥–∏–º–æ, –∫ –¥–æ–±—Ä—É!

–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä, —É–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ —Ç–µ–ø–µ—Ä—å –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω—É–∂–Ω–æ:

```bash:
sudo systemctl restart dhcpd@enp0s8
```

![[Pasted image 20240116185716.png | center | 800]]

–ü–æ—Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞:

![[Pasted image 20240116190011.png | center | 700]]

–ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ–∫–∞ —á—Ç–æ –ø—É—Å—Ç–æ. 
–ß—Ç–æ–±—ã —Å—Ç–∞–ª–æ –Ω–µ –ø—É—Å—Ç–æ, –æ–±—Ä–∞—Ç–∏–º—Å—è –∫ DHCP-—Å–µ—Ä–≤–µ—Ä—É (—á–µ—Ä–µ–∑ DHCP-–∫–ª–∏–µ–Ω—Ç):

```bash:
sudo dhclient enp0s8
```

![[Pasted image 20240116190139.png | center | 700]]

–í–∏–¥–∏–º, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç—É –ø—Ä–∏—Å–≤–æ–∏–ª—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π IP-–∞–¥—Ä–µ—Å –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞.

–î–ª—è –ø–æ–ª–Ω–æ—Ç—ã –∫–∞—Ä—Ç–∏–Ω—ã, —Å–Ω–æ–≤–∞ –ø–æ—Å–º–æ—Ç—Ä–∏–º –≤ –ª–æ–≥–∏ DHCP-—Å–µ—Ä–≤–µ—Ä–∞:

```bash:
journalctl | grep -Ei 'dhcp' 
```

![[Pasted image 20240116190445.png | center | 800]]

–í–∏–¥–∏–º - —Ç—Ä–∞—Ñ–∏–∫ –∏–¥—ë—Ç! –†–∞–¥—É–µ–º—Å—è –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∑–∞–¥–∞–Ω–∏—é.

## 3.2. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º DHCP-—Å–µ—Ä–≤–µ—Ä - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–¥–∞—á–∞

–î–æ–±–∞–≤–∏–º —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é DHCP-—Å–µ—Ä–≤–µ—Ä–∞:

```ruby:/etc/dhcpd-eth0.conf
...

host client {
    # MAC-–∞–¥—Ä–µ—Å –∏—Å–∫–æ–º–æ–≥–æ —Ö–æ—Å—Ç–∞
	hardware ethernet 08:00:27:6c:15:a5;
	# –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π IP-–∞–¥—Ä–µ—Å, –∫–æ—Ç–æ—Ä—ã–π –º—ã –µ–º—É –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º
	fixed-address 192.168.100.99;	
}
```

–í—ã–±–∏—Ä–∞–µ–º IP-–∞–¥—Ä–µ—Å—Å `192.168.100.99`, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω –Ω–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –¥–∏–∞–ø–∞–∑–æ–Ω—É –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∞–¥—Ä–µ—Å–æ–≤ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è, –∞ —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –µ–≥–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–∏–∫—Ç–æ —Å–ª—É—á–∞–π–Ω–æ –Ω–µ –∑–∞–π–º—ë—Ç.

–ò –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä:

```bash:
sudo systemctl restart dhcpd@enp0s8
```
<br>

>–ù–µ–±–æ–ª—å—à–æ–µ –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–µ. –ü–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä, –∑–∞–º–µ—Ç–∏–ª, —á—Ç–æ –≤—Ä–µ–º—è –¥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–¥—Ä–µ—Å–∞ –æ—á–µ–Ω—å —Å—Ç—Ä–∞–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º —Å–∫–∞—á–µ—Ç —Ç–æ –≤–≤–µ—Ä—Ö, —Ç–æ –≤–Ω–∏–∑, –∏–Ω–æ–≥–¥–∞ —Å—Ä–∞–∑—É –Ω–∞ –¥–µ—Å—è—Ç–∫–∏ —Å–µ–∫—É–Ω–¥. –ü–æ—á–µ–º—É?<br>
>![[Pasted image 20240116194633.png | center | 800]]

<br>
–°–º–æ—Ç—Ä–∏–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∫–ª–∏–µ–Ω—Ç–∞ - –æ–Ω–∞ –æ–±–Ω–æ–≤–∏–ª–∞—Å—å —Å—Ä–∞–∑—É –∂–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:

![[Pasted image 20240116200314.png | center | 700]]

–°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏, –≤–∏–¥–∏–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:

![[Pasted image 20240116200424.png | center | 800]]


# –ó–∞–¥–∞–Ω–∏–µ 2. DNS-—Å–µ—Ä–≤–µ—Ä BIND

## 1. –£—Å—Ç–∞–Ω–æ–≤–∏–º DNS-—Å–µ—Ä–≤–µ—Ä

```bash:
sudo pacman -S bind
```

## 2. –û–∑–Ω–∞–∫–æ–º–∏–º—Å—è —Å –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π BIND

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª BIND - —ç—Ç–æ —Ñ–∞–π–ª `/etc/named.conf`
–ê –≤ `/var/named` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —É –Ω–∞—Å –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –æ–ø–∏—Å–∞–Ω–∏—è DNS-–∑–æ–Ω.

Bind –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–∂–µ –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å –Ω–µ–∫–æ—Ç–æ—Ä–æ–π –∑–∞–≥–æ—Ç–æ–≤–∫–æ–π –∫–æ–Ω—Ñ–∏–≥–∞. –î–µ–≤—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞ —Ä–∞–¥–∏, –æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è —Å –Ω–µ–π. –í–æ–∑–º–æ–∂–Ω–æ, –±—É–¥–µ—Ç —á–µ–≥–æ –ø–æ—á–µ—Ä–ø–Ω—É—Ç—å –¥–ª—è —Å–µ–±—è.

```c:/etc/named.conf
// vim:set ts=4 sw=4 et:  
  
options {  
¬†¬†¬†directory "/var/named";  
¬†¬†¬†pid-file "/run/named/named.pid";  
  
¬†¬†¬†// Uncomment these to enable IPv6 connections support  
¬†¬†¬†// IPv4 will still work:  
¬†¬†¬†// ¬†listen-on-v6 { any; };  
¬†¬†¬†// Add this for no IPv4:  
¬†¬†¬†// ¬†listen-on { none; };  
  
¬†¬†¬†allow-recursion { 127.0.0.1; };  
¬†¬†¬†allow-transfer { none; };  
¬†¬†¬†allow-update { none; };  
  
¬†¬†¬†version none;  
¬†¬†¬†hostname none;  
¬†¬†¬†server-id none;  
};  
  
zone "localhost" IN {  
¬†¬†¬†type master;  
¬†¬†¬†file "localhost.zone";  
};  
  
zone "0.0.127.in-addr.arpa" IN {  
¬†¬†¬†type master;  
¬†¬†¬†file "127.0.0.zone";  
};  
  
zone "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa" {  
¬†¬†¬†type master;  
¬†¬†¬†file "localhost.ip6.zone";  
};  
  
//zone "example.org" IN {  
// ¬†¬†¬†type slave;  
// ¬†¬†¬†file "example.zone";  
// ¬†¬†¬†masters {  
// ¬†¬†¬†¬†¬†¬†¬†192.168.1.100;  
// ¬†¬†¬†};  
// ¬†¬†¬†allow-query { any; };  
// ¬†¬†¬†allow-transfer { any; };  
//};  
  
//logging {  
// ¬†¬†¬†channel xfer-log {  
// ¬†¬†¬†¬†¬†¬†¬†file "/var/log/named.log";  
// ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†print-category yes;  
// ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†print-severity yes;  
// ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†severity info;  
// ¬†¬†¬†¬†¬†¬†¬†};  
// ¬†¬†¬†¬†¬†¬†¬†category xfer-in { xfer-log; };  
// ¬†¬†¬†¬†¬†¬†¬†category xfer-out { xfer-log; };  
// ¬†¬†¬†¬†¬†¬†¬†category notify { xfer-log; };  
//};
```

–ó–¥–µ—Å—å –º—ã –≤–∏–¥–∏–º, –∫–∞–∫ –º–æ–≥—É—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–µ –∏–ª–∏ –∏–Ω—ã–µ –±–ª–æ–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. 
–ê –µ—â—ë, –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, —Ç—É—Ç –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å. 

–í—Å—ë —ç—Ç–æ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ.

```ada:/var/named/127.0.0.zone
@ ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†  1D IN SOA ¬†¬†localhost. root.localhost. (  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†42 ¬†¬†¬†; serial (yyyymmdd##)  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†3H ¬†¬†¬†; refresh  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†15M ¬†¬†; retry  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†1W ¬†¬†¬†; expiry  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†1D    ; minimum ttl
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†) ¬†  
  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†1D ¬†IN ¬†NS ¬†¬†¬†¬†¬†localhost.  
1.0.0.127.in-addr.arpa. ¬†¬†¬†¬†¬†  1D ¬†IN ¬†PTR ¬†¬†¬†¬†localhost.
```

```ada:/var/named/localhost.ip6.zone
@ ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†1D IN SOA ¬†¬†localhost. root.localhost. (  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†42 ¬†¬†¬†; serial (yyyymmdd##)  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†3H ¬†¬†¬†; refresh  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†15M ¬†¬†; retry  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†1W ¬†¬†¬†; expiry  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†1D ) ¬†; minimum ttl  
  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†1D ¬†IN ¬†NS ¬†¬†¬†¬†¬†localhost.  
  
1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. ¬†¬†1D ¬†IN ¬†PTR localhost.
```

```ada:/var/named/localhost.zone
@ ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†1D IN SOA ¬†¬†localhost. root.localhost. (  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†42 ¬†¬†¬†; serial (yyyymmdd##)  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†3H ¬†¬†¬†; refresh  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†15M ¬†¬†; retry  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†1W ¬†¬†¬†; expiry  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†1D ) ¬†; minimum ttl  
  
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†1D ¬†IN ¬†NS ¬†¬†¬†¬†¬†localhost.  
  
localhost. ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†1D ¬†IN ¬†A ¬†¬†¬†¬†¬†¬†127.0.0.1  
localhost. ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†1D ¬†IN ¬†AAAA ¬†¬†¬†::1
```

–ê –∑–¥–µ—Å—å –º—ã –≤–∏–¥–µ–ª–∏ –ø—Ä–∏–º–µ—Ä –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∑–æ–Ω –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ localhost. 

## 3. –ù–∞–ø–∏—à–µ–º —Å–≤–æ—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–í—Å—ë, —á—Ç–æ –º—ã –≤–∏–¥–µ–ª–∏ –≤—ã—à–µ - —ç—Ç–æ —Ö–æ—Ä–æ—à–æ. –ù–æ –ø–µ—Ä–µ–¥ –Ω–∞–º–∏ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –Ω–µ–º–Ω–æ–≥–æ –¥—Ä—É–≥–∞—è –∑–∞–¥–∞—á–∞.

–ò–∑ —Ç–æ–≥–æ, —á—Ç–æ –º—ã –≤–∏–¥–µ–ª–∏ –≤—ã—à–µ, –æ—Å—Ç–∞–≤–ª—é –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `/var/named`, –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞ –æ—Å—Ç–∞–≤–ª—é –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ localhost-–∑–æ–Ω. –ó–≤—É—á–∏—Ç –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ, –∞ —è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –ø–æ—á–∏—Ç–∞–ª - –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ —ç—Ç–æ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏. –ú–æ–ª –µ—Å—Ç—å –Ω–µ–∫–∏–π —Å—Ç–∞—Ä—ã–π —Å–æ—Ñ—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ —Ç–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ. –•–æ—Ç—å –∏ –≤–µ—Ä–∏—Ç—Å—è —Å —Ç—Ä—É–¥–æ–º. 

–ò–ª–∏ –µ—Å–ª–∏ –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –∫–ª–∏–µ–Ω—Ç –∑–∞–±—É–¥–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `/etc/hosts` - —á—Ç–æ–±—ã –æ–Ω –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–æ–ø–∞–ª –ø–æ –ø—É—Ç–∏ `localhost` –∫ —Å–µ–±–µ –¥–æ–º–æ–π. –≠—Ç–æ —É–∂–µ –∑–≤—É—á–∏—Ç –Ω–∞–º–Ω–æ–≥–æ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–µ–µ.

–¢–∞–∫–∂–µ –û–ß–ï–ù–¨ –ø–æ—Å—Ç–∞—Ä–∞–µ–º—Å—è –Ω–µ –∑–∞–±—ã–≤–∞—Ç—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–æ–Ω –º–µ–Ω—è—Ç—å —Ç–∞–∫–∂–µ –ø–æ–ª–µ Serial. –≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä –¥–∞–ª –Ω–∞–º —Å–≤–µ–∂–∏–π –æ—Ç–≤–µ—Ç, –∞ –Ω–µ –≤–∑—è–ª –∏–∑ —Å–≤–æ–µ–≥–æ –∫–µ—à–∞.


**–ù–∞–ø–∏—à–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥:**

```c:/etc/named.conf
// vim:set ts=4 sw=4 et:

// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
options {
    directory "/var/named";
    pid-file "/run/named/named.pid";
    
    listen-on port 53 { any; };
};

// –ü–æ–∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–Ω—ã–µ –∏–∑ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞
zone "localhost" IN {
    type master;
    file "localhost.zone";
};

zone "0.0.127.in-addr.arpa" IN {
    type master;
    file "127.0.0.zone";
};

zone "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa" {
    type master;
    file "localhost.ip6.zone";
};


// –ü—Ä—è–º–∞—è –∑–æ–Ω–∞
zone "mydomain.test" {
    type master;
    file "mydomain.test.zone";
};

// –û–±—Ä–∞—Ç–Ω–∞—è –∑–æ–Ω–∞
zone "100.168.192.in-addr.arpa" {
    type master;
    file "192.168.100.zone";
};
```

**–ù–∞–ø–∏—à–µ–º –∫–æ–Ω—Ñ–∏–≥ –ø—Ä—è–º–æ–π –∑–æ–Ω—ã:**

```ada:/var/named/mydomain.test.zone
$TTL 86400
@       IN      SOA     ns1.mydomain.test. admin.mydomain.test. (
                        9          ; Serial
                        3600       ; Refresh (1 hour)
                        1800       ; Retry (30 minutes)
                        604800     ; Expire (1 week)
                        86400      ; Minimum TTL (1 day)
                        )
;
@               IN      NS      ns1.mydomain.test.
ns1             IN      A       192.168.100.42
testing1        IN      A       192.168.100.55
testing2        IN      A       192.168.100.66
```

1. –£–∫–∞–∑—ã–≤–∞–µ–º –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ `ns1.mydomain.test.`
2. –†–µ–∑–æ–ª–≤–∏–º –¥–æ–º–µ–Ω –≤—Ç–æ—Ä–æ–≥–æ —É—Ä–æ–≤–Ω—è `ns1`, –æ—Ç–Ω–æ—Å—è—â–∏–π—Å—è –∫ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É,  –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∞–¥—Ä–µ—Å
3. –†–µ–∑–æ–ª–≤–∏–º –¥–æ–º–µ–Ω—ã –≤—Ç–æ—Ä–æ–≥–æ —É—Ä–æ–≤–Ω—è, —Å–¥–µ–ª–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ò –Ω–∞–ø–∏—à–µ–º –∫–æ–Ω—Ñ–∏–≥ –æ–±—Ä–∞—Ç–Ω–æ–π –∑–æ–Ω—ã:**

```ada:/var/named/192.168.100.zone
$TTL 86400
@       IN      SOA     ns1.mydomain.test. admin.mydomain.test. (
                        3          ; Serial
                        3600       ; Refresh (1 hour)
                        1800       ; Retry (30 minutes)
                        604800     ; Expire (1 week)
                        86400      ; Minimum TTL (1 day)
                        )
;
@        IN      NS      ns1.mydomain.test.
42       IN      PTR     ns1.mydomain.test.
55       IN      PTR     testing1.mydomain.test.
66       IN      PTR     testing2.mydomain.test.
```

1. –£–∫–∞–∑—ã–≤–∞–µ–º –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –æ–ø—è—Ç—å `ns1.mydomain.test.`
2. –†–µ–∑–æ–ª–≤–∏–º 42 IP –∏–∑ –∏—Å–∫–æ–º–æ–π –∑–æ–Ω—ã –Ω–∞ –¥–æ–º–µ–Ω –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
3. –†–µ–∑–æ–ª–≤–∏–º 55 –∏ 66 IP –∏–∑ –∏—Å–∫–æ–º–æ–π –∑–æ–Ω—ã –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–æ–º–µ–Ω—ã

**–ó–∞–ø—É—Å—Ç–∏–º DNS-—Å–µ—Ä–≤–µ—Ä.**

```bash:
sudo systemctl enable named
sudo systemctl start named
```

## 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ–º —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–î–ª—è –ø—Ä—è–º–æ–π –∑–æ–Ω—ã:**

>[!blank | alt]
>![[Pasted image 20240117012551.png | center | 800]]
>
>–ß—Ç–æ –Ω—É–∂–Ω–æ - —Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è
>
>![[Pasted image 20240117012722.png | center | 800]]
>
>–ê —á—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ - –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è

–û–±—Ä–∞—Ç–∏–º –≤–Ω–∏–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω–∏—Ü—É –≤ –æ—Ç–≤–µ—Ç–∞—Ö –¥–ª—è `mydomain.test` –∏ `non-existing.mydomain.test`

**–î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π –∑–æ–Ω—ã:**

>[!blank | alt]
>![[Pasted image 20240117013043.png | center | 800]]
>
>–£—Å–ø–µ—à–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ–º –∏–∑ –≤—Å–µ—Ö –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö IP-–∞–¥—Ä–µ—Å–æ–≤ –¥–æ–º–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞
>
>![[Pasted image 20240117013345.png | center | 800]]
>
>–ò, –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ, –ø–æ–ª—É—á–∞–µ–º –ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –Ω–∞ IP-–∞–¥—Ä–µ—Å–∞, –∫–æ—Ç–æ—Ä—ã–º –º—ã –Ω–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–ª–∏ –¥–æ–º–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞

–ö—Å—Ç–∞—Ç–∏, –æ–±—Ä–∞—Ç–∏–º –≤–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –∏ –ø—Ä–∏—è—Ç–Ω–æ –∑–∞—Ä–µ–∑–æ–ª–≤–∏–ª—Å—è 127.0.0.1